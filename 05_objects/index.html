<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8' />
    <meta name="description" content="The JavaScript Lessons : Some lessons on JavaScript" />

    <link rel="stylesheet" type="text/css" media="screen" href="../stylesheets/stylesheet.css">

    <title>05 Objects - The JavaScript Lessons</title>
</head>

<body class="sub-page">

<!-- HEADER -->
<div id="header_wrap" class="outer">
    <header class="inner">
        <a id="home_banner" href="../index.html">Home</a>

        <h1 id="project_title">Lesson 05: Objects</h1>
        <section id="fiddle">
            <a class="fiddle_link" target="_blank" href="http://jsfiddle.net/michael_alt/CLqLL/">jsFiddle</a>
        </section>
    </header>
</div>

<!-- MAIN CONTENT -->
<div id="main_content_wrap" class="outer">
    <section id="main_content" class="inner">
        <h3>JavaScript und Objekte bzw. Klassen</h3>

        <p>
            Eine der ersten Hürden die ein erfahrener OO-Programmierer überwinden muss, ist das Fehlen des class Schlüsselwortes.
            Man könnte vielleicht eine Trennlinie ziehen zwischen objekt-orientiertem Programmieren und einem neuen
            Pendant klassen-orientierte Programmierung. Dabei lässt sich dann JavaScript bei Ersterem einordnen.
        </p>
        <p>
            In JavaScript ist quasi alles ein Objekt. Das beinhaltet damit <code>String</code>,<code>Number</code>,
            <code>Function</code>, <code>Array</code> und so weiter und natürlich das <code>Object</code> selbst.
            Die Spezifikation sagt, dass ein String-Literal "on-the-fly" umgewandelt wird in ein String-Objekt, wenn ein
            Eigenschaften- oder Methoden-Zugriff erfolgt. Objekte sind ganz allgemein zu verstehen als Sammlungen
            von key-value Paaren (plus interne "Magie").
        </p>
        <p>
            Klassen im Sinne der herkömmlichen Objekt-Orientierten Programmierung existieren wiederum gar nicht.
            JavaScript verfolgt hier einen komplett anderen Ansatz, der uns zwingt, zunächst einmal die bekannte
            OOP zu verlernen.
        </p>

        <h3>Creating Objects</h3>

        <p>Ein JavaScript-Objekt kann auf unterschiedlichste Weise erzeugt werden. Die Varianten können reduziert werden
        auf:</p>

        <ol>
            <li>Objekt-Initialisierer</li>
            <li>Konstruktor - Funktion</li>
            <li>Object.create - Methode</li>
        </ol>

        <p>Beginnen wir mit dem Objekt-Initialisierer</p>
        <pre><code>
var e1 = {};

var c1 = {
    nr: 1,
    firstname: "Klaus",
    lastname: "Lage"
};

var c2 = new Object({
    nr: 1,
    firstname: "Klaus",
    lastname: "Lage"
});
        </code></pre>

        <h3>Eigenschaften</h3>
        <p>
            Properties können jederzeit definiert werden. Sowie bei der Definition als auch beim Abruf sind zwei syntaktische Varianten erlaubt:
        </p>
        <dl>
            <dt>Punkt-Operator</dt>
            <dd><pre><code>objekt.prop = value</code></pre></dd>
            <dt>Array-Zugriff</dt>
            <dd><pre><code>objekt["prop"] = value</code></pre></dd>
        </dl>

        <p>Bisher sehen unsere Objekte eher aus wie Datenstrukturen. Deswegen zum nächsten Schritt:</p>

        <h3>Konstruktor-Funktionen</h3>

        <pre><code>
function Leer() {};
var e2 = new Leer();

var Article = function( nr, name ) {
    this.nr = nr;
    this.name = name;
}
var a1 = new Article(1, "Berliner Weiße");
        </code></pre>

        <p>Anmerkung: Konstruktor-Funktionen beginnen nach Konvention mit einem Großbuchstaben.</p>

        <p>Aber was macht dieses <code>this</code> hier?</p>

        <p>Zunächst ist <code>this</code> ein Verweis. Worauf this verweist entscheidet der Kontext:</p>
        <ul>
            <li>Global: window (oder das global unter z.B. node)</li>
            <li>In einer Funktion: ebenso diesen globalen Kontext (bzw. undefined falls wir uns im strict-Mode befinden).</li>
            <li>In einem Konstruktor bzw. einer Methode(!): das Objekt.</li>
        </ul>


        <h3>Methoden</h3>

        <p>
            Wie sieht denn jetzt eine Methode aus? Die <a href="http://es5.github.com/#x4.3.27">Spezifikation</a> sagt:
            <strong>Eine Methode ist eine Funktion die ein Wert einer Eigenschaft ist.</strong>
        </p>
        <pre><code>
function Customer( id, firstname, lastname ) {
    this.id = id;
    this.firstname = firstname;
    this.lastname = lastname;
    this.fullname = function () { return this.firstname +  " " + this.lastname };
}
        </code></pre>
        <p>Natürlich lassen sich Methoden genau wie Properties auch dynamisch hinzufügen.</p>

        <h3>Eigenschaften und Methoden des Object-Typs</h3>
        <p>
            Prinzipiell erzeugt also unsere Konstruktor-Funktion ein <code>Object</code> mit zusätzlichen Eigenschaften.
            Die vorhandenen Eigenschaften fasst die <a href="http://es5.github.com/#x15.2.4">Referenz</a> zusammen. Unter anderem ist das eine
            <code>constructor</code>-Property, die unsere Konstruktor-Funktion enthält,
            sowie zum Beispiel auch eine <code>toString</code>-Methode.
        </p>
    </section>
</div>
<script type="text/javascript" src="../javascripts/main.js"></script>
<script type="text/javascript" src="script.js"></script>
</body>
</html>
